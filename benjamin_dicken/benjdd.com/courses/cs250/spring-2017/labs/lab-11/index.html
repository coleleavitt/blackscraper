<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CSc 250 Lab 11</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="stylesheet" href="/lib/highlight/styles/default.css">
  <script src="/lib/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Poppins:ital,wght@0,400;0,700;1,400;1,700&family=Questrial&family=Roboto+Flex:opsz,wdth,wght,YTDE@8..144,110,400,-230;8..144,110,700,-230&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

  <style>
  .lnp {
    font-size: 1.5em;
  }
  </style>

</head>
<body style="background-color: rgb(255, 255, 255)">
<script src="/js/theme.min.js"></script>

  <h1 id="csc-250-lab-11">CSc 250: Lab 11</h1>

<p><img src="/assets/memes/sql-join.png" width="650" /></p>

<p>This lab was designed to be completed during lab-time for cs250.
This lab is not graded for correctness.
However, you should work through all of the problems, as it will help you on assignments and exams.
If you cannot complete the lab in the alloted time, finish at home.</p>

<p><strong>This particular lab was designed to be completed on the Mac lab machines in GS 930</strong></p>

<h2 id="problem-1---database-setup">Problem 1 - Database setup</h2>

<p>In this lab we are going to continue using the same database and data from lab 10.
(If you did not work through the problem of lab 10, go back and review it thoroughly.)</p>

<p>We must create a new sqlite database file and then load the schema and data into it.
Open a terminal window and <code class="language-plaintext highlighter-rouge">cd</code> to the <code class="language-plaintext highlighter-rouge">Desktop</code> directory.
Start sqlite3 and create a new database file by running the following from bash:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sqlite3 lab11db
</code></pre></div></div>

<p>Now go to the lab 10 page, scroll to the bottom, and click the link to download the solutions.
The solution file contains all of the <code class="language-plaintext highlighter-rouge">CREATE</code> and <code class="language-plaintext highlighter-rouge">INSERT</code> statements for the schema and data.
Copy/paste the CREATE and INSERT statements into your sqlite session in the terminal window.</p>

<p>Run Each of the following commands in the sqlite session to make sure the data is loaded:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.tables</code></li>
  <li><code class="language-plaintext highlighter-rouge">.schema</code></li>
  <li><code class="language-plaintext highlighter-rouge">SELECT * FROM movie;</code></li>
  <li><code class="language-plaintext highlighter-rouge">SELECT * FROM director;</code></li>
</ul>

<p>We’ll be using this database in the remainder of the problems.</p>

<h2 id="problem-2">Problem 2</h2>

<p>Assume a python program named <code class="language-plaintext highlighter-rouge">lab-11-A.py</code> exists in the same directory as the <code class="language-plaintext highlighter-rouge">lab11db</code> file (<code class="language-plaintext highlighter-rouge">Desktop</code>).
<code class="language-plaintext highlighter-rouge">lab-11-A.py</code> has the following contents:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
import sqlite3
conn = sqlite3.connect('lab11db')
rows = conn.execute("SELECT * FROM director")
for row in rows:
    print( str(row[0]) + ' | ' +str(row[2]))
</code></pre></div></div>

<p>What will this program print when run?
Try to figure out the answer, then create the program and run it to check.</p>

<h2 id="problem-3">Problem 3</h2>

<p>Assume a python program named <code class="language-plaintext highlighter-rouge">lab-11-B.py</code> exists in the same directory as the <code class="language-plaintext highlighter-rouge">lab11db</code> file (<code class="language-plaintext highlighter-rouge">Desktop</code>).
<code class="language-plaintext highlighter-rouge">lab-11-B.py</code> has the following contents:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
import sqlite3
conn = sqlite3.connect('lab11db')
rows = conn.execute("SELECT year, title, rt_rating FROM movie WHERE rt_rating &gt; 70")
for row in rows:
    print( str(row[1]) + ' | ' +str(row[2]))
</code></pre></div></div>

<p>What will this program print when run?
Try to figure out the answer, then create the program and run it to check.</p>

<h2 id="problem-4">Problem 4</h2>

<p>Now, let’s write a very simple python program that accesses a table in this database.
In the same directory that you created <code class="language-plaintext highlighter-rouge">lab11db</code>, create a python program named <code class="language-plaintext highlighter-rouge">getmovies.py</code>.
This program will:</p>

<ul>
  <li>Import <code class="language-plaintext highlighter-rouge">sqlite3</code></li>
  <li>Connect to the <code class="language-plaintext highlighter-rouge">lab11db</code> database</li>
  <li>Executes <code class="language-plaintext highlighter-rouge">SELECT * FROM movie;</code></li>
  <li>Loops through all of the rows that are returned and prints them out</li>
</ul>

<p>If you forgot how to connect to a database and run a query from python, look at the previous problems or the lecture notes!</p>

<p>Assuming the database was populated correctly, the results of running this query should be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python3 getmovies.py
King Kong | 2005 | 84 | 1 | 4
Flags of Our Fathers | 2006 | 73 | 2 | 3
Man of Steel | 2013 | 55 | 3 | 1
Super 8 | 2011 | 82 | 4 | 5
Open Range | 2003 | 79 | 5 | 7
The Kings Speech | 2010 | 95 | 6 | 2
Hacksaw Ridge | 2016 | 87 | 7 | 6
</code></pre></div></div>

<h2 id="problem-5">Problem 5</h2>

<p>Write a python program named <code class="language-plaintext highlighter-rouge">addmovies.py</code> that uses the <code class="language-plaintext highlighter-rouge">sqlite3</code> module to insert 3 new rows into the <code class="language-plaintext highlighter-rouge">movie</code> table using <code class="language-plaintext highlighter-rouge">INSERT</code> statements.
You can add whichever 3 movies you want.
Though, remember to choose <code class="language-plaintext highlighter-rouge">movie_id</code> values that have not already been used by another row!
After writing the program, run it.</p>

<p>In bash, <code class="language-plaintext highlighter-rouge">cd</code> to the directory with the <code class="language-plaintext highlighter-rouge">lab11db</code> file in it and run <code class="language-plaintext highlighter-rouge">sqlite3 lab11db</code> to open it up.
Run <code class="language-plaintext highlighter-rouge">SELECT * FROM movies;</code> and make sure the new rows appear!</p>



<footer>
    <div>&nbsp</div>
    <div style="text-align:center;">	&copy; Benjamin Dicken 2016 - 2024 </div>
    <div>&nbsp</div>
</footer>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cs250</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="stylesheet" href="/lib/highlight/styles/default.css">
  <script src="/lib/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Poppins:ital,wght@0,400;0,700;1,400;1,700&family=Questrial&family=Roboto+Flex:opsz,wdth,wght,YTDE@8..144,110,400,-230;8..144,110,700,-230&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

  <style>
  .lnp {
    font-size: 1.5em;
  }
  </style>

</head>
<body style="background-color: rgb(255, 255, 255)">
<script src="/js/theme.min.js"></script>

  <h1 id="csc-250-lecture-notes-file-io">CSc 250: Lecture Notes: File I/O</h1>

<h2 id="opening-a-file">Opening a File</h2>

<p>As with any programming language, it is useful to be able to read data from a file and write data to a file in python.
In this section we are going to learn how to interact with files in python.</p>

<p>Before we can interact with a file (read it, write to it, append to it), a file must be <em>opened</em>.
Python has a built-in function named <code class="language-plaintext highlighter-rouge">open</code> which is used for this purpose.
Below is an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f = open('some_file_name', 'r')
</code></pre></div></div>

<p>This python statement opens a file named <code class="language-plaintext highlighter-rouge">some_file_name</code> in “read” mode (indicated by the <code class="language-plaintext highlighter-rouge">'r'</code>).
The open file object is stored into the <code class="language-plaintext highlighter-rouge">f</code> variable.
The first argument to open is the name of the file.
The second argument is the mode that the file is opened in.
Possible options for this argument are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">'r'</code> - Opens the file in read mode (the file can be read, but not modified).</li>
  <li><code class="language-plaintext highlighter-rouge">'w'</code> - Opens the file in write mode (the file can be modified, but not read).</li>
  <li><code class="language-plaintext highlighter-rouge">'r+'</code> - The file can be both read and written to.</li>
  <li><code class="language-plaintext highlighter-rouge">'a'</code> - All writes to the file <em>append</em> to the end of the existing file.</li>
</ul>

<p>So, for example, doing:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f = open('some_file_name', 'r')
</code></pre></div></div>

<p>Will give you the ability to <em>read</em> <code class="language-plaintext highlighter-rouge">some_file_name</code> but not modify it.
But:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f = open('some_file_name', 'r+')
</code></pre></div></div>

<p>Will give you the ability to both <em>read</em> and <em>write</em> <code class="language-plaintext highlighter-rouge">some_file_name</code>.</p>

<h2 id="reading-a-file">Reading a file</h2>

<p>Lets say we have a file named <code class="language-plaintext highlighter-rouge">roles.txt</code> with the following contents:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Han Solo       | Harrison Ford
Luke Skywalker | Mark Hamill
Batman         | Christian Bale
Thor           | Chris Hemsworth
Sherlock       | Benedict Cumberbatch
</code></pre></div></div>

<p>To open this file, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'r')
</code></pre></div></div>

<p>At this point, the file is open and readable, but we have not actually read any of the contents yet.</p>

<p>To read the <em>entire</em> contents of the file as a string, we can call the <code class="language-plaintext highlighter-rouge">read</code> function.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; roles = role_file.read()
</code></pre></div></div>

<p>Now <code class="language-plaintext highlighter-rouge">roles</code> has the entire contents of the <code class="language-plaintext highlighter-rouge">roles.txt</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; print(roles)
Han Solo       | Harrison Ford
Luke Skywalker | Mark Hamill
Batman         | Christian Bale
Thor           | Chris Hemsworth
Sherlock       | Benedict Cumberbatch
</code></pre></div></div>

<p>The file can also be read one-line at-a-time with the function <code class="language-plaintext highlighter-rouge">readline</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'r')
&gt;&gt;&gt; line = role_file.readline()
&gt;&gt;&gt; print(line)
Han Solo       | Harrison Ford

&gt;&gt;&gt; line = role_file.readline()
&gt;&gt;&gt; print(line)
Luke Skywalker | Mark Hamill

&gt;&gt;&gt; line = role_file.readline()
&gt;&gt;&gt; print(line)
Batman         | Christian Bale

&gt;&gt;&gt; line = role_file.readline()
&gt;&gt;&gt; print(line)
Thor           | Chris Hemsworth

&gt;&gt;&gt; line = role_file.readline()
&gt;&gt;&gt; print(line)
Sherlock       | Benedict Cumberbatch

</code></pre></div></div>

<p>Notice that there is an extra newline printed each time we <code class="language-plaintext highlighter-rouge">print(line)</code>.
This is because each line read in has a newline (<code class="language-plaintext highlighter-rouge">\n</code>) role at the end of it in the file.
<code class="language-plaintext highlighter-rouge">print()</code> adds an additional newline by default.
As with reading in from standard input via <code class="language-plaintext highlighter-rouge">sys.stdin.realine()</code>, we want to <code class="language-plaintext highlighter-rouge">rstrip()</code> the newline away:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'r')
&gt;&gt;&gt; line = role_file.readline().rstrip()
&gt;&gt;&gt; print(line)
Han Solo       | Harrison Ford
&gt;&gt;&gt; line = role_file.readline().rstrip()
&gt;&gt;&gt; print(line)
Luke Skywalker | Mark Hamill
&gt;&gt;&gt; line = role_file.readline().rstrip()
&gt;&gt;&gt; print(line)
Batman         | Christian Bale
&gt;&gt;&gt; line = role_file.readline().rstrip()
&gt;&gt;&gt; print(line)
Thor           | Chris Hemsworth
&gt;&gt;&gt; line = role_file.readline().rstrip()
&gt;&gt;&gt; print(line)
Sherlock       | Benedict Cumberbatch
</code></pre></div></div>

<p>We can also loop through each line of a text file individually using a <code class="language-plaintext highlighter-rouge">for</code> loop.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'r')
&gt;&gt;&gt; for line in role_file:
...     print(line.rstrip())
...
Han Solo       | Harrison Ford
Luke Skywalker | Mark Hamill
Batman         | Christian Bale
Thor           | Chris Hemsworth
Sherlock       | Benedict Cumberbatch
&gt;&gt;&gt;
</code></pre></div></div>

<h2 id="a-complete-program-that-reads-from-a-file">A complete program that reads from a file</h2>

<p>Lets’ write a complete python program that uses the  <code class="language-plaintext highlighter-rouge">roles.txt</code> file to do something useful.
This program will be called <code class="language-plaintext highlighter-rouge">getrole.py</code>.
This program will treat the <code class="language-plaintext highlighter-rouge">roles.txt</code> as a database of movie roles and the actor corresponding to the role.
The mapping between the role and the actor will be stored in an internal dictionary.</p>

<p>Once read in, the user will be able to ask what actor played as particular role.</p>

<p>First, declare the dictionary:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Create an empty map data structure representing the database of roles.
# All of the movie roles will be stored here.
role_db = {}
</code></pre></div></div>

<p>Next, open the file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Open roles.txt
# This script assumes roles.txt is in the current working directory
role_file = open('roles.txt', 'r')
</code></pre></div></div>

<p>Now we must read in the contents of <code class="language-plaintext highlighter-rouge">roles.txt</code> line-by-line, and save the information into <code class="language-plaintext highlighter-rouge">role_db</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Loop through each line of the file and save into role_db
for line in role_file:
    sp = line.split('|')
    role = sp[0].strip()
    actor     = sp[1].strip()
    role_db[role] = actor
</code></pre></div></div>

<p>Now that we’ve read in and stored the entire role database, we should ask the user what role they’d like to know the actor of.
We will allow the user ask for as much information as they want in a loop.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Let the user get role/actor information in a loop
while True:
    print ('PROGRAM: What role would you like to know about?')
    line = sys.stdin.readline().rstrip()
    if line == 'exit':
        print('PROGRAM: Bye!')
        sys.exit()
    sp = line.split('tell me who played')
    if len(sp) &gt; 1:
        role = sp[1].strip()
        if role in role_db:
            print(role_db[role] + ' played ' + role)
        else:
            print('PROGRAM: Not sure!')
    else:
        print('PROGRAM: Huh?')
</code></pre></div></div>

<p>As can be seen, the user will be able to figure out what actor played a role by typing:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tell me who played X
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">X</code> is the name of a role in a movie.
If <code class="language-plaintext highlighter-rouge">getrole.py</code> can find the role in <code class="language-plaintext highlighter-rouge">role_db</code> it will reply with the value associated with the role key.
If it does not recognize the role, it will print <code class="language-plaintext highlighter-rouge">Not sure!</code>.
If the command that it reads in is completely unintelligible, it will print <code class="language-plaintext highlighter-rouge">Huh?</code>.
Once the user is done, they can type <code class="language-plaintext highlighter-rouge">exit</code> to quit the program.</p>

<p>Putting this all together, we get:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys

# Create an empty map data structure representing the database of roles
# All of the movie roles will be stored here
role_db = {}

# Open roles.txt
# This script assumes roles.txt is in the current working directory
role_file = open('roles.txt', 'r')

# Loop through each line of the file and save into role_db
for line in role_file:
    sp = line.split('|')
    role = sp[0].strip()
    actor     = sp[1].strip()
    role_db[role] = actor

# Let the user get role/actor information in a loop
while True:
    print ('PROGRAM: What role would you like to know about?')
    line = sys.stdin.readline().rstrip()
    if line == 'exit':
        print('PROGRAM: Bye!')
        sys.exit()
    sp = line.split('tell me who played')
    if len(sp) &gt; 1:
        role = sp[1].strip()
        if role in role_db:
            print(role_db[role] + ' played ' + role)
        else:
            print('PROGRAM: Not sure!')
    else:
        print('PROGRAM: Huh?')
</code></pre></div></div>

<p>When run from bash, we get:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python3 getrole.py
PROGRAM: What role would you like to know about?
tell me who played Sherlock
Benedict Cumberbatch played Sherlock
PROGRAM: What role would you like to know about?
tell me who played Han Solo
Harrison Ford played Han Solo
PROGRAM: What role would you like to know about?
tell me who played Darth Vader
PROGRAM: Not sure!
PROGRAM: What role would you like to know about?
what actor played the Joker?
PROGRAM: Huh?
PROGRAM: What role would you like to know about?
exit
PROGRAM: Bye!
$
</code></pre></div></div>

<p>In building this program, we combined several concepts wever learned over tha past few weeks:
advanced string manipulation, dictionaries, lists, reading a file, reading from standard input, etc.</p>

<h2 id="writing-to-a-file">Writing to a file</h2>

<p>To write to a file, we have to open the file in write mode.
Say that we do not currently have a file named <code class="language-plaintext highlighter-rouge">roles.txt</code> in the current working directory, but we want to populate the file with a python program.</p>

<p>To open the the file in write mode:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'w')
</code></pre></div></div>

<p>To write a string to the file, use the <code class="language-plaintext highlighter-rouge">write()</code> function:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file.write('Han Solo       | Harrison Ford')
30
&gt;&gt;&gt;
</code></pre></div></div>

<p>This will write the string into the file.
Notice that the <code class="language-plaintext highlighter-rouge">write()</code> function returns the number of characters written to the file.
In order for the file to actually save to the computer’s hard drive, it must be closed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file.close()
</code></pre></div></div>

<p>This is what we get when we try to cat the contents of the file from bash:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat roles.txt
Han Solo       | Harrison Ford$
</code></pre></div></div>

<p>The file write worked!
Notice that a newline was not automatically added to the end of the string.
The <code class="language-plaintext highlighter-rouge">write()</code> function does not add newlines by default.
So if you want a line break in the file that you write you, they must be specified with the <code class="language-plaintext highlighter-rouge">\n</code> character.</p>

<p>Let’s re-open the file and write a few lines with newlines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'w')
&gt;&gt;&gt; role_file.write('Thor           | Chris Hemsworth\n')
33
&gt;&gt;&gt; role_file.write('Sherlock       | Benedict Cumberbatch\n')
38
&gt;&gt;&gt; role_file.write('Iron Man       | Robert Downey Jr\n')
34
&gt;&gt;&gt; role_file.close()
</code></pre></div></div>

<p>Now we can <code class="language-plaintext highlighter-rouge">cat</code> the file from bash and we will see:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat roles.txt
Thor           | Chris Hemsworth
Sherlock       | Benedict Cumberbatch
Iron Man       | Robert Downey Jr
$
</code></pre></div></div>

<p>The three lines that were written to the file (along with the newlines) show up correctly.
However, notice that the line we previously wrote to the file (<code class="language-plaintext highlighter-rouge">Han Solo       | Harrison Ford</code>) is no longer there.
We did not explicitly delete the file, so why is it gone?</p>

<p>When a file is opened in write mode, writing to the file starts from the beginning by default.
If there is already content in the file, the content will be over-written starting at the beginning.
This can be demonstrated with another example.</p>

<p>Say we have a file named <code class="language-plaintext highlighter-rouge">text.txt</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat text.txt
ABCDEFGHIJKLMNOPQRSTUVWXYZ
$
</code></pre></div></div>

<p>This file has a total of 27 characters (the 26 characters of the alphabet, and the newline at the end).
Now, let’s write a few characters to this file in python:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; text_file = open('text.txt', 'w')
&gt;&gt;&gt; text_file.write('Iron Man\n')
9
&gt;&gt;&gt; text_file.close()
</code></pre></div></div>

<p>Now the contents of the file are:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat text.txt
Iron Man
$
</code></pre></div></div>

<p>The old contents are completely gone!
Sometimes, overwriting the file each time we want to add something is the desired behavior, but at other times it is not.</p>

<h3 id="appending-to-a-file">Appending to a file</h3>

<p>In append mode, we can write to a file but instead of erasing the previous contents, the content that is written gets <em>appended</em> to the end of the file.</p>

<p>In the same vein as the previous example, let’s say the <code class="language-plaintext highlighter-rouge">roles.txt</code> file does not yet exist. To “open” this file in append mode:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'a')
</code></pre></div></div>

<p>This opens the (new) file <code class="language-plaintext highlighter-rouge">roles.txt</code> in append mode.
Now, we will write the same three lines as the earlier example, and close the file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file.write('Thor           | Chris Hemsworth\n')
33
&gt;&gt;&gt; role_file.write('Sherlock       | Benedict Cumberbatch\n')
38
&gt;&gt;&gt; role_file.write('Iron Man       | Robert Downey Jr\n')
34
&gt;&gt;&gt; role_file.close()
</code></pre></div></div>

<p>The contents of the file are now:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat roles.txt
Thor           | Chris Hemsworth
Sherlock       | Benedict Cumberbatch
Iron Man       | Robert Downey Jr
$
</code></pre></div></div>

<p>Now let’s try opening the file again, and appending a few more lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; role_file = open('roles.txt', 'a')
&gt;&gt;&gt; role_file.write('Bane           | Tom Hardy\n')
27
&gt;&gt;&gt; role_file.write('Luke Skywalker | Mark Hamill\n')
29
&gt;&gt;&gt; role_file.write('Superman       | Henry Cavill\n')
30
&gt;&gt;&gt; role_file.close()
</code></pre></div></div>

<p>And the contents of the file are now…</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat roles.txt
Thor           | Chris Hemsworth
Sherlock       | Benedict Cumberbatch
Iron Man       | Robert Downey Jr
Bane           | Tom Hardy
Luke Skywalker | Mark Hamill
Superman       | Henry Cavill
</code></pre></div></div>

<p>Notice that the additional lines did not over-write the old ones.</p>

<p>Let’s use what we’ve learned to write a python program in which we can <em>add</em> roles to the <code class="language-plaintext highlighter-rouge">roles.py</code> program that we wrote earlier.
Let’s call this program <code class="language-plaintext highlighter-rouge">addrole.py</code></p>

<p>Below is a program that does this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys

# Open roles.txt
# This script assumes roles.txt is in the current working directory
role_file = open('roles.txt', 'a')

# Let the user add role/actor information to roles.txt until
# the exit command is given
while True:
    print ('PROGRAM: Add a role?')
    line = sys.stdin.readline().rstrip()
    if line == 'exit':
        print('PROGRAM: Bye!')
        sys.exit()
    sp = line.split('played')
    if len(sp) &gt; 1:
        actor = sp[0].strip()
        role  = sp[1].strip()
        role_file.write(role + ' | ' + actor + '\n')
        print('PROGRAM: Role added!')
    else:
        print('PROGRAM: Huh?')
</code></pre></div></div>

<p>First, the <code class="language-plaintext highlighter-rouge">roles.txt</code> file is opened in append mode.
Then, standard input is read from the user in a loop.
If the user enters a line of the form <code class="language-plaintext highlighter-rouge">X played Y</code>, <code class="language-plaintext highlighter-rouge">addrole.py</code> will write this role to the file.
If the user types <code class="language-plaintext highlighter-rouge">exit</code>, the role file will be close (thus saving the contents) and the program will exit.
On any other input, the program will reply with <code class="language-plaintext highlighter-rouge">Huh?</code>.</p>

<p>Below is a demonstration of running this program, and the contents of <code class="language-plaintext highlighter-rouge">roles.txt</code> are shown before and after the run.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat roles.txt
$ python3 addrole.py
PROGRAM: Add a role?
Henry Cavill played Superman
PROGRAM: Role added!
PROGRAM: Add a role?
Christian Bale played Batman
PROGRAM: Role added!
PROGRAM: Add a role?
Chris Evans played Captain America
PROGRAM: Role added!
PROGRAM: Add a role?
exit
PROGRAM: Bye!
$
$ cat roles.txt
Superman | Henry Cavill
Batman | Christian Bale
Captain America | Chris Evans
$
</code></pre></div></div>

<p>Now <code class="language-plaintext highlighter-rouge">getrole.py</code> and <code class="language-plaintext highlighter-rouge">addrole.py</code> can be used in conjunction to create a database of roles/actors and loop-up what actor played a particular role.</p>

<h2 id="insertingdeleting-mid-file">Inserting/Deleting mid-file</h2>

<p>Appending is great, but what if we want to add/remove a line to/from a file, but <em>not</em> at the end?
The simplest way to do this (in most cases) is to actually:</p>

<ul>
  <li>Read in an entire file into some type of data structure (dictionary, list, etc)</li>
  <li>Insert/remove elements into the data structure</li>
  <li>Re-write the entire data structure to the file</li>
</ul>

<p>This perhaps is not very efficient, but it is straightforward and works well.
Continuing with the running example, say that <code class="language-plaintext highlighter-rouge">roles.txt</code> is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Superman | Henry Cavill
Batman | Christian Bale
Captain America | Chris Evans
</code></pre></div></div>

<p>Say we want to insert <code class="language-plaintext highlighter-rouge">Thor | Chris Hemsworth</code> to the second line of the file, and shift all of the other lines below it.
Using the technique described above, we could do:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data = []
f = open('./roles.txt', 'r')
for line in f:
    data.append(line)

data.insert(1, 'Thor | Chris Hemsworth\n')

f = open('./roles.txt', 'w')
for d in data:
    f.write(d)

f.close()
</code></pre></div></div>

<p>First, the entire file is read in, line-by-line, into the <code class="language-plaintext highlighter-rouge">data</code> list.
Next, <code class="language-plaintext highlighter-rouge">'Thor | Chris Hemsworth\n'</code> is inserted at the second index.
Lastly, <code class="language-plaintext highlighter-rouge">data</code> is written out to the same <code class="language-plaintext highlighter-rouge">roles.txt</code> file, and the file is closed.</p>

<p>After running this, <code class="language-plaintext highlighter-rouge">roles.txt</code> looks like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Superman | Henry Cavill
Thor | Chris Hemsworth
Batman | Christian Bale
Captain America | Chris Evans
</code></pre></div></div>

<p>Removing an arbitrary line can function similarly.
To remove the <code class="language-plaintext highlighter-rouge">Batman | Christian Bale</code> line from <code class="language-plaintext highlighter-rouge">roles.txt</code>, we can do:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data = []
f = open('./roles.txt', 'r')
for line in f:
    data.append(line)

data.pop(2)

f = open('./roles.txt', 'w')
for d in data:
    f.write(d)

f.close()
</code></pre></div></div>

<p>This is exactly the same as the previous code, except an element is popped from the list rather than added.
After running this code <code class="language-plaintext highlighter-rouge">roles.txt</code> looks like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Superman | Henry Cavill
Thor | Chris Hemsworth
Captain America | Chris Evans
</code></pre></div></div>

<p>Removed!</p>

<h2 id="flushing-a-file">Flushing a file</h2>

<p>As mentioned before, when a file is written to, it is not immediately saved to disk.
One way to save the file is to call the <code class="language-plaintext highlighter-rouge">close()</code> function.
This works, but after calling <code class="language-plaintext highlighter-rouge">close()</code> we cannot do any more writing to the file unless we call <code class="language-plaintext highlighter-rouge">open(...)</code> again.</p>

<p>Another way to “save” the contents of the file is to call <code class="language-plaintext highlighter-rouge">f.flush()</code>.
This function “flushes” all of the written contents to the file on-disk.
After this function is called, you can continue to write to the file.</p>

<h2 id="file-exercises">File Exercises</h2>

<p><br />
<img style="float:left; margin-right:15px; margin-bottom:15px;" src="/assets/in-class-assignment.png" width="50" /></p>

<p>Below is a complete python program named <code class="language-plaintext highlighter-rouge">process-file.py</code> which is in the current working directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data = []

data_file = open('data.txt', 'r')

for line in data_file:
    data.append(line)

for val in data:
    if 'man' in val:
        print('This is a man')
    elif len(val) &lt;= 4:
        print('Unrecognizable line')
    elif val[len(val)-1] == 'n':
        print('The 6th char is e')
    else:
        print(val)
</code></pre></div></div>

<p>A text file named <code class="language-plaintext highlighter-rouge">data.txt</code> also exists in this directory.
Below are several possibilities for the contents of the <code class="language-plaintext highlighter-rouge">data.txt</code> file.
For each possibility, write what this program would output when run.
If you think an error will be generated, just say so.</p>

<p><strong>(A)</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Iron Man
Superman
Batman
unknown
UNKNOWN LINE
</code></pre></div></div>

<p><strong>(B)</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Gambit
Wolverine
Magneto
Iceman
Jean
</code></pre></div></div>

<p><strong>(C)</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Thor
Sabretooth
Cyclops
Storm
Professor X
Spiderman
</code></pre></div></div>

<p><br />
<img style="float:left; margin-right:15px; margin-bottom:15px;" src="/assets/in-class-assignment.png" width="50" /></p>

<p>Below is a (nearly) complete python program named <code class="language-plaintext highlighter-rouge">write-file.py</code> which is in the current working directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data = X

data_file = open('data.txt', 'w')

index = 0
for val in data:
    if index % 2 == 0:
        data_file.write(val.upper() + '\n')
    if val[0].isupper():
        data_file.write(val + '\n')
    else:
        data_file.write(val + '(needs a cap)')
    index = index + 1

data_file.flush()
</code></pre></div></div>

<p>Below are several possibilities for the <code class="language-plaintext highlighter-rouge">X</code> in this script.
For each possibility, write what this program would write to <code class="language-plaintext highlighter-rouge">data.txt</code>.
If you think an error will be generated, just say so.</p>

<p><strong>(A)</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['Lebron', 'Curry', 'Harden', 'Westbrook', 'Leonard', 'Durant', 'DeRozan']
</code></pre></div></div>

<p><strong>(B)</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['antman', 'ANTMAN', 'superman', 'SUPERMAN']
</code></pre></div></div>

<p><strong>(C)</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['ONE', '', 'TWO', '', 'THREE']
</code></pre></div></div>

<p><br />
<img style="float:left; margin-right:15px; margin-bottom:15px;" src="/assets/in-class-assignment.png" width="50" /></p>

<p><strong>(A)</strong> 
Write a function named <code class="language-plaintext highlighter-rouge">append_text</code> that takes two arguments, <code class="language-plaintext highlighter-rouge">file_name</code> and <code class="language-plaintext highlighter-rouge">text</code>.
This function will open the file named <code class="language-plaintext highlighter-rouge">file_name</code>, append <code class="language-plaintext highlighter-rouge">text</code> to the end of the file, and then save the file to disk <em>without</em> closing it.</p>

<p><strong>(B)</strong>
Modify the function to take a third argument <code class="language-plaintext highlighter-rouge">num</code>.
The function will repeatedly append <code class="language-plaintext highlighter-rouge">text</code> <code class="language-plaintext highlighter-rouge">num</code> times, and then flush the file to disk.</p>



<footer>
    <div>&nbsp</div>
    <div style="text-align:center;">	&copy; Benjamin Dicken 2016 - 2024 </div>
    <div>&nbsp</div>
</footer>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cs250</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="stylesheet" href="/lib/highlight/styles/default.css">
  <script src="/lib/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Poppins:ital,wght@0,400;0,700;1,400;1,700&family=Questrial&family=Roboto+Flex:opsz,wdth,wght,YTDE@8..144,110,400,-230;8..144,110,700,-230&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

  <style>
  .lnp {
    font-size: 1.5em;
  }
  </style>

</head>
<body style="background-color: rgb(255, 255, 255)">
<script src="/js/theme.min.js"></script>

  <h1 id="csc-250-lecture-notes-modules">CSc 250: Lecture Notes: Modules</h1>

<p><img src="/assets/memes/modules.jpg" width="200" /></p>

<p>Earlier in the semester we learned how to use the <code class="language-plaintext highlighter-rouge">import</code> command in python to load in functions from outside python files while using python interactive shell.
Today we are going to learn more about using modules, <code class="language-plaintext highlighter-rouge">import</code>, and layers of abstraction in python.</p>

<h2 id="setting-things-up">Setting things Up</h2>

<p>Let’s say that we are building an application which connects to and uses the (now familiar) movie database.
As a reminder, this is the schema of this database:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE director (
  first_name TEXT,
  last_name TEXT,
  age INT,
  director_id INT PRIMARY KEY);

CREATE TABLE movie (
  title TEXT,
  year INT,
  rt_rating INT,
  movie_id INT PRIMARY KEY,
  director_id INT,
  FOREIGN KEY (director_id) REFERENCES director(director_id));
</code></pre></div></div>

<p>In this application, we want the ability to fetch information about movies and directors.
We also want to be able to add information, and ensure that it is saved in the database so it can be retrieved at a later time.
Below is a link to an example of such a program:</p>

<h3 id="pymdb-1zip"><a href="./res/pymdb-1.zip">pymdb-1.zip</a></h3>

<p>Download the code and follow along.</p>

<p>Before running this code to try it out, we should insert some data into the <code class="language-plaintext highlighter-rouge">movie</code> and <code class="language-plaintext highlighter-rouge">director</code> tables:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INSERT INTO director VALUES ('Chris', 'Nolan', 46, 1);
INSERT INTO director VALUES ('Tom', 'Hooper', 44, 2);
INSERT INTO director VALUES ('Clint', 'Eastwood', 86, 3);
INSERT INTO director VALUES ('Peter', 'Jackson', 55, 4);
INSERT INTO director VALUES ('Steven', 'Spielberg', 70, 5);
INSERT INTO director VALUES ('Mel', 'Gibson', 61, 6);
INSERT INTO director VALUES ('Kevin', 'Costner', 62, 7);
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INSERT INTO movie VALUES ('King Kong', 2005, 84, 1, 4);
INSERT INTO movie VALUES ('Flags of Our Fathers', 2006, 73, 2, 3);
INSERT INTO movie VALUES ('Man of Steel', 2013, 55, 3, 1);
INSERT INTO movie VALUES ('Super 8', 2011, 82, 4, 5);
INSERT INTO movie VALUES ('Open Range', 2003, 79, 5, 7);
INSERT INTO movie VALUES ('The Kings Speech', 2010, 95, 6, 2);
INSERT INTO movie VALUES ('Hacksaw Ridge', 2016, 87, 7, 6);
</code></pre></div></div>

<p>In class, we will take some time here to examine the source code of <code class="language-plaintext highlighter-rouge">pymdb.py</code> and run it a few times.
If you are following along at home, try this out for yourself.</p>

<p>…</p>

<p>This program works, and seems to serve it’s purpose well
However, after taking a closer look at the code, we can see that it is not particularly easy to understand, nor is it “well organized”.</p>

<p>If we think about the structure of this program, and how it interacts with the modules it depends on, we get a organization diagram that looks something like this:</p>

<p><img src="./res/python-modules-1.png" width="250" /></p>

<p>Let’s see if we cant <em>clean up</em> this code a little bit.</p>

<h2 id="try-2">Try 2</h2>

<p>When looking through the code of <code class="language-plaintext highlighter-rouge">pymdb.py</code> we can see a lot of SQL-related code interspersed with the core logic of command-handling.
One way we could make this more organized it to extract all of the SQL-related code into a separate module.
Below, I’ve linked to a zip file containing some python files where I’ve done just that.</p>

<h3 id="pymdb-2zip"><a href="./res/pymdb-2.zip">pymdb-2.zip</a></h3>

<p>Take a close look at this code, with organization in mind.
Is it easier to understand?
Harder?
About the same?</p>

<p>Again, representing the organization of the code with a diagram, we get:</p>

<p><img src="./res/python-modules-2.png" width="250" /></p>

<h2 id="try-3">Try 3</h2>

<p>Let’s make one more attempt at “organizing” this code even further.
Check out the code in the below zip file.</p>

<h3 id="pymdb-3zip"><a href="./res/pymdb-3.zip">pymdb-3.zip</a></h3>

<p>The code follows this model:</p>

<p><img src="./res/python-modules-3.png" width="250" /></p>

<p>One of the big motivations for keeping code organized and well-abstracted is understandability.</p>

<h2 id="re-using-modules">Re-using Modules</h2>

<p>Another motivation for separating large programs into smaller components is re-usability.
If the code and functionality of your program is neatly organized into modules, you will find that you can re-use the same module is multiple programs.
This allows a person to avoid re-writing identical code over-and-over again across different programs.
The code linked below uses the same <code class="language-plaintext highlighter-rouge">movieconn</code> module in a different way.</p>

<h3 id="dirdumpzip"><a href="./res/dirdump.zip">dirdump.zip</a></h3>

<p>Because we were able to re-use code from an existing module, the program itself was extremely simple to implement.
When writing it, we did not need to worry about opening a database connection and constructing/executing SQL queries.</p>

<h2 id="abstraction">Abstraction</h2>

<p>In each phase of the transformation of <code class="language-plaintext highlighter-rouge">pymdb.py</code>, we have been <strong>abstracting</strong> functionality into smaller components.
In computer science, <strong>Abstraction</strong> Is the process of encapsulating complex capabilities / functionality into a simpler, more user-friendly interface.</p>

<p>I’m not going to provide a lot of lecture notes on this topic.
Instead, I’ll provide some links that I suggest you read:</p>

<ul>
  <li><a href="http://stackoverflow.com/a/21220945/1522168">A great StackOverflow answer about abstraction</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Abstraction_principle_(computer_programming)">Wikipedia’s abstraction page (dense)</a></li>
  <li><a href="http://www.bbc.co.uk/education/guides/zttrcdm/revision">BBC article explaining abstraction in CS</a></li>
  <li>TODO: More?</li>
</ul>

<p>In class, we will discuss what <strong>Abstraction</strong> is…</p>



<footer>
    <div>&nbsp</div>
    <div style="text-align:center;">	&copy; Benjamin Dicken 2016 - 2024 </div>
    <div>&nbsp</div>
</footer>

</body>
</html>

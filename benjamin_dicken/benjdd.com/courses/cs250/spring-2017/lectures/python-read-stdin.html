<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cs250</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="stylesheet" href="/lib/highlight/styles/default.css">
  <script src="/lib/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Poppins:ital,wght@0,400;0,700;1,400;1,700&family=Questrial&family=Roboto+Flex:opsz,wdth,wght,YTDE@8..144,110,400,-230;8..144,110,700,-230&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

  <style>
  .lnp {
    font-size: 1.5em;
  }
  </style>

</head>
<body style="background-color: rgb(255, 255, 255)">
<script src="/js/theme.min.js"></script>

  <h1 id="csc-250-lecture-notes-reading-from-stdin">CSc 250: Lecture Notes: reading from stdin</h1>

<h2 id="reading-from-standard-input">Reading from standard input</h2>

<p>When we were learning bash, many of our scripts accepted user input values on the command line.
This was accomplished by using command-line arguments, and using the <code class="language-plaintext highlighter-rouge">${1}</code>, <code class="language-plaintext highlighter-rouge">${2}</code>, <code class="language-plaintext highlighter-rouge">${3}</code>,… variables to get the values that the user typed.
Though we have not learned about it yet, this can also be done when writing python code.
Before learning about processing command line arguments in python, we are going to discuss about reading text from standard input.</p>

<p>In python, we can read text from the command line entered by a user while the program is running.
By doing this, we can make our program “interact” with a user, based on the text that the user types.
Below is a very simple animated example:</p>

<p><img src="/assets/interactive-python-script-2.gif" width="600" /></p>

<p>In the above example, we executed <code class="language-plaintext highlighter-rouge">typing.py</code> with <code class="language-plaintext highlighter-rouge">python3.6</code>.
The program starts up, prints out <code class="language-plaintext highlighter-rouge">PROGRAM: Type something, then hit Enter:</code>, and then <em>waits</em> for the user to type something.
The program is still running while waiting, but it won’t <em>do</em> anything until text is types and then the Enter key is pressed.
Once it is, the program reports what was typed, and then asks for more input.
This process would continue forever, or until the program is killed.
This is obviously a silly example, but using this technique we can write really cool programs, that “react” to human input.</p>

<p>First, let’s study how to implement the “silly” example, and then we will apply it to a more complex program.</p>

<p>For starters, how can we read text that is typed on the command-line?
For this, we will use a function in the <code class="language-plaintext highlighter-rouge">sys</code> module, which is built-in to python.
So first, we import it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
</code></pre></div></div>

<p>The function that we need is called <code class="language-plaintext highlighter-rouge">readline()</code>, and it can be called via:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sys.stdin.readline()
</code></pre></div></div>

<p>When this is executed, it tells the python program to wait for a full line of text input coming from standard input.
Whatever input it receives is <em>returned</em> by this function call.
Thus, we can store the input into a variable by writing:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user_input = sys.stdin.readline()
</code></pre></div></div>

<p>This will store exactly what the user types into <code class="language-plaintext highlighter-rouge">user_input</code>.
However, doing this will also cause a new-line character to be included at the end (because the user hits Enter).
To get rid of the training newline, we can write:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user_input = sys.stdin.readline().rstrip()
</code></pre></div></div>

<p>Adding <code class="language-plaintext highlighter-rouge">rstrip()</code> will remove any excessive whitespace (including new lines) from the end of a string.
For now, we are not going to talk in-depth about how it works, just know that it does.</p>

<p>A complete program using this function would look like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys

print('PROGRAM: Type something, then hit Enter:')
user_input = sys.stdin.readline().rstrip()
print('PROGRAM: You typed: "' + user_input + '"')
</code></pre></div></div>

<p>Let’s put this in a file named <code class="language-plaintext highlighter-rouge">typing.py</code> and try it out:</p>

<p><img src="/assets/interactive-python-script-1.gif" width="600" /></p>

<p>This works similarly to the original example, but it only accepts a single line of input, and then exits after it has read it in a prints a massage to the user.
The original screen recording that we saw repeatedly asked the user to “Type something, then hit Enter” and it did so forever, or until the program was exited (control-c).
How can this be achieved?
In this case, it is rather simple.
Essentially, we want the last three lines of the above program to repeat indefinitely, and we should already know how to do this.
While loops!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys

while True:
    print('PROGRAM: Type something, then hit Enter:')
    user_input = sys.stdin.readline().rstrip()
    print('PROGRAM: You typed: "' + user_input + '"')
</code></pre></div></div>

<p>This change will make <code class="language-plaintext highlighter-rouge">typing.py</code> behave like the original example.</p>

<p>At this point, we have written a complete python program that “interacts” with the user.</p>

<p>A few weeks ago we wrote a script in bash that produced a MadLib, based on words passed to the script via command-line arguments.
Let’s write a MadLib script in python named <code class="language-plaintext highlighter-rouge">madlib.py</code>.
However, unlike the bash script, we will get each input word by reading it from what a user types in standard input.
To do this, we will use the same <code class="language-plaintext highlighter-rouge">sys.stdin.readline().rstrip()</code> function that we used in the last example.</p>

<p><code class="language-plaintext highlighter-rouge">madlib.py</code> would look something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys 
 
 print('Enter a name:')
name_a = sys.stdin.readline().rstrip()

print('Enter another name:')
name_b = sys.stdin.readline().rstrip()

print('Enter an adverb:')
adverb = sys.stdin.readline().rstrip()

print('Enter an adjective:')
adjective = sys.stdin.readline().rstrip()

print('Enter a city or country name (real or fictional):')
location = sys.stdin.readline().rstrip()

print('\n--- The Story of ' + name_a + ' and ' + name_b + '---\n')
print(name_a + ' and ' + name_b + ' were best friends who both lived in')
print('the peaceful land of ' + location + '. One day, they saw a ' + adjective)
print('grizzly bear wreaking havok in the streets. They ' + adverb + ' got their')
print('swords out and slew the beast.')
print('... The End.\n')
</code></pre></div></div>

<p>In the first few lines, we take as input 5 different categories of word.
Once we have read them all in, they will be used to construct the MadLib story that it printed to stdout.
Below is an example run:</p>

<p><img src="/assets/interactive-python-script-3.gif" width="600" /></p>

<p>Notice how each time one of the lines containing <code class="language-plaintext highlighter-rouge">sys.stdin.readline().rstrip()</code> is reached, the program “pauses” so that it can read input from a user.</p>

<p>Let’s go over one more example, that does some comparison based on input read in from stdin.
Below is the contents of a python script named <code class="language-plaintext highlighter-rouge">distance.py</code> that does exactly this.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys 
 
 print('Distance to convert:')
distance = sys.stdin.readline().rstrip()

print('Input measurement standard (in, ft, mi):')
mes_in = sys.stdin.readline().rstrip()

print('Output measurement standard (mm, m, km):')
mes_out = sys.stdin.readline().rstrip()

in_value = float(distance)

if mes_in == 'in':
    pass # do nothing in here
elif mes_in == 'ft':
    in_value = in_value * 12
elif mes_in == 'mi':
    in_value = in_value * 63360

out_value = 0 

if mes_out == 'mm':
    out_value = in_value * 25.4
elif mes_out == 'm':
    out_value = in_value * 0.0254
elif mes_out == 'km':
    out_value = in_value * 0.0000254

print( distance + mes_in + ' ---&gt; ' + str(out_value) + mes_out)
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">distance.py</code> is a script that will convert a distance from one measurement standard to another.
As you can probably tell, this program reads three values from standard input using the same functions as the earlier examples.</p>

<p>First, it reads in a numeric distance to convert.
Second, it reads in a measurement standard that the input value is specified in.
“in” for inches, “ft” for feet, and “mi” for miles.
Third, it reads in a measurement standard to convert the input distance to.
“mm” for millimeters, “m” for meters, and “km” for kilometers.</p>

<p>After reading in these values, the input <code class="language-plaintext highlighter-rouge">distance</code> is converted from a string to a float, so that the program can do the appropriate mathematical operations on the input.</p>

<p>The first if/elif chain determines what measurement standard the input distance is supposed to be.
If it is inches, nothing needs to be done.
If it is feet, the <code class="language-plaintext highlighter-rouge">in_value</code> is converted from feet to inches by multiplying by 12.
If it is miles, the <code class="language-plaintext highlighter-rouge">in_value</code> is converted from miles to inches by multiplying by 63360.</p>

<p>The first if/elif chain determines what measurement standard to convert the input <code class="language-plaintext highlighter-rouge">distance</code> to.
In each case, it multiplies <code class="language-plaintext highlighter-rouge">in_value</code> by the appropriate value multiplier, and then saves the result to <code class="language-plaintext highlighter-rouge">out_value</code>.</p>

<p>Finally, the resulting conversion in printed to standard output.</p>

<p>Below is a recording of running this program a few times.</p>

<p><img src="/assets/interactive-python-script-4.gif" width="600" /></p>

<p><br />
<img style="float:left; margin-right:15px; margin-bottom:15px;" src="/assets/in-class-assignment.png" width="50" /></p>

<p>(This problem stolen from lab 5 :-).
Write a python program named <code class="language-plaintext highlighter-rouge">quiz.py</code>.
This program will be an interactive quiz, and will read user answers in from standard input.
If you forgot how to read lines from standard input, check out lecture notes 9.</p>

<p>This program will ask the user three questions, one by one.
The user will type a response to each question on the command line, and then hit enter.
Below are a few example runs of this quiz.
You should be able to “reverse-engineer” the implementation of this quiz given the example runs below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python3.6 quiz.py 
Q1: What bash command is used to search for strings?
grep
CORRECT!
Q2: What bash command is used to list files?
ls
CORRECT!
Q3: What is Ben's favorite noodle?
spaetzle
CORRECT!
$
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python3.6 quiz.py 
Q1: What bash command is used to search for strings?
sed
WRONG! The correct answer is "grep"
Q2: What bash command is used to list files?
listing
WRONG! The correct answer is "ls"
Q3: What is Ben's favorite noodle?
bowtie
WRONG! The correct answer is "spaetzle"
$ 
</code></pre></div></div>



<footer>
    <div>&nbsp</div>
    <div style="text-align:center;">	&copy; Benjamin Dicken 2016 - 2024 </div>
    <div>&nbsp</div>
</footer>

</body>
</html>

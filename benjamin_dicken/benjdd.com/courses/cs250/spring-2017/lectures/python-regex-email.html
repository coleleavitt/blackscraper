<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cs250</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="stylesheet" href="/lib/highlight/styles/default.css">
  <script src="/lib/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Poppins:ital,wght@0,400;0,700;1,400;1,700&family=Questrial&family=Roboto+Flex:opsz,wdth,wght,YTDE@8..144,110,400,-230;8..144,110,700,-230&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

  <style>
  .lnp {
    font-size: 1.5em;
  }
  </style>

</head>
<body style="background-color: rgb(255, 255, 255)">
<script src="/js/theme.min.js"></script>

  <h1 id="csc-250-lecture-notes-finding-email-addresses-with-re">CSc 250: Lecture Notes: Finding Email Addresses with re</h1>

<p>In these notes, we will learn how to write a python application that extracts email addresses from text file using <code class="language-plaintext highlighter-rouge">re</code>.</p>

<h2 id="finding-email-addresses">Finding email addresses</h2>

<p>In this exercise, we are going to write a program that uses the <code class="language-plaintext highlighter-rouge">re</code> modules to extract email addresses from a text file.
For starters, we’ll get the program to extract email addresses from a hard-coded string, and the file reading can be added later.
For the time being, let’s assume that we want to extract the emails from the following string:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text = '''
  If you would like to get advising help, send a message to advising@cs.arizona.edu.
  Send email to webmaster@cs.arizona.edu if you'd like to report issues with the CS website.
  The best email to contact the instructor at is either:
    instructorname@email.arizona.edu or instructorname@cs.arizona.edu.
'''
</code></pre></div></div>

<p>Next step: what regular expression do we need?</p>

<p>What pattern should we be looking for to extract emails from text?</p>

<p>In English, what we’re looking for is: a sequence of letters and symbols, followed by an “@” sign, followed by another sequence of letters and symbols that has at least one dot in it, and ends with a letter.
In regex, this would (roughly) be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[A-Za-z0-9]+@[A-Za-z0-9]+\.[A-Za-z0-9]+
</code></pre></div></div>

<p>Now that the regex string is defined, let’s put the code together to do the matching:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import re

text = '''
  If you would like to get advising help, send a message to advising@cs.arizona.edu.
  Send email to webmaster@cs.arizona.edu if you'd like to report issues with the CS website.
  The best email to contact the instructor at is either:
    instructorname@email.arizona.edu or instructorname@cs.arizona.edu.
'''

regex_str = r'[A-Za-z0-9]+@[A-Za-z0-9]+\.[A-Za-z0-9]+'
pattern = re.compile(regex_str)
result = pattern.findall(text)

for email in result:
    print(email)
</code></pre></div></div>

<p>Run the code and try it out… does it work?</p>

<h2 id="reading-from-a-file">Reading from a File</h2>

<p>Let’s modify the program to search for emails in a file, rather than just a fixed string.</p>

<p>First, the program should get a file name from a user that will be read and searched through:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
print('Enter a file to search through:')
input_file = sys.stdin.readline().strip()
</code></pre></div></div>

<p>Next, the program will read the file and append all of the contents to the <code class="language-plaintext highlighter-rouge">text</code> string, which will be searched through with the regular expression later.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text = ''
f = open(input_file, 'r')
for line in f:
    test.append(line)
</code></pre></div></div>

<p>Then, do the regular expression search, just like was done before:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>regex_str = r'[A-Za-z0-9]+@[A-Za-z0-9]+\.[A-Za-z0-9]+'
pattern = re.compile(regex_str)
result = pattern.findall(text)
for email in result:
    print(email)
</code></pre></div></div>

<p>Putting it all together:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
import re

print('Enter a file to search through:')
input_file = sys.stdin.readline().strip()

text = ''
f = open(input_file, 'r')
for line in f:
    text += line

regex_str = r'[A-Za-z0-9]+@[A-Za-z0-9]+\.[A-Za-z0-9]+'
pattern = re.compile(regex_str)
result = pattern.findall(text)

for email in result:
    print(email)
</code></pre></div></div>

<p>Try running this script on this large text file, containing several emails in it:</p>

<h3 id="chapter-2txt"><a href="./chapter-2.txt">chapter-2.txt</a></h3>



<footer>
    <div>&nbsp</div>
    <div style="text-align:center;">	&copy; Benjamin Dicken 2016 - 2024 </div>
    <div>&nbsp</div>
</footer>

</body>
</html>
